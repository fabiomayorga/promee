<?phprequire_once ROOT . 'libs' . DS . 'smarty' . DS . 'libs' . DS . 'Smarty.class.php';class View extends Smarty {    private $_request;    private $_js;    private $_css;    private $_acl;    private $_rutas;    private $_jsPlugin;    private $_cssPlugin;    public function __construct(Request $peticion, ACL $_acl) {        parent::__construct();        $this->_request = $peticion;        $this->_js = array();        $this->_css = array();        $this->_acl = $_acl;        $this->_rutas = array();        $this->_jsPlugin = array();        $this->_cssPlugin = array();        $modulo = $this->_request->getModulo();        $controlador = $this->_request->getControlador();        if ($modulo) {            $this->_rutas['view'] = ROOT . 'modules' . DS . $modulo . DS . 'views' . DS . $controlador . DS;            $this->_rutas['js'] = BASE_URL . 'modules/' . $modulo . '/views/' . $controlador . '/js/';            $this->_rutas['css'] = BASE_URL . 'modules/' . $modulo . '/views/' . $controlador . '/css/';        } else {            $this->_rutas['view'] = ROOT . 'views' . DS . $controlador . DS;            $this->_rutas['js'] = BASE_URL . 'views/' . $controlador . '/js/';            $this->_rutas['css'] = BASE_URL . 'views/' . $controlador . '/css/';        }    }    public function renderizar($vista, $item = false, $noLayout = DEFAULT_LAYOUT) {          $this->template_dir = ROOT . 'views' . DS . 'layout' . DS . $noLayout . DS;        $this->config_dir = ROOT . 'views' . DS . 'layout' . DS . $noLayout . DS . 'configs' . DS;        $this->cache_dir = ROOT . 'tmp' . DS . 'cache' . DS;        $this->compile_dir = ROOT . 'tmp' . DS . 'template' . DS;        $menuAdmin  = array();        $menuCliente = array();        $menuProveedor    = array();		$menuConfig = array();             $menu = array(                    array(                        'id' => 'dashboard',                        'titulo' => 'Dashboard',                        'enlace' => BASE_URL . 'login/panel',                        'imagen' => 'dashboard',                    )            );        $menu[] = array(                'id' => 'proyecto',                'titulo' => 'proyecto',                'enlace' => BASE_URL . 'proyectos/index/',                'imagen' => 'folder',                'submenu' => ''            );                $menu[] = array(                'id' => 'salir',                'titulo' => 'Salir',                'enlace' => BASE_URL . 'login/cerrar/',                'imagen' => 'exit_to_app',                'submenu' => ''            );                                  			        		$_params = array(			'ruta' => BASE_URL . 'views/layout/' . $noLayout . '/',//esto es para la vista del assent            'ruta_css' => BASE_URL . 'views/layout/' . $noLayout . '/css/',            'ruta_img' => BASE_URL . 'views/layout/' . $noLayout . '/img/',            'ruta_js' => BASE_URL . 'views/layout/' . $noLayout . '/js/',            'ruta_layout' => BASE_URL . 'views/layout/' . $noLayout . '/assets/',            'menu' => $menu,            'item' => $item,            'js' => $this->_js,            'css' => $this->_css,            'css_plugin' => $this->_cssPlugin,            'js_plugin' => $this->_jsPlugin,            'root' => BASE_URL,            'configs' => array(                'app_name' => APP_NAME,                'app_company_name' => APP_COMPANY_NAME,                'app_company_nit' => APP_COMPANY_NIT,                'app_company_web' => APP_COMPANY_WEB            )        );        if (is_readable($this->_rutas['view'] . $vista . '.tpl')) {            $this->assign('_contenido', $this->_rutas['view'] . $vista . '.tpl');        } else {            throw new Exception('Error de vista');        }        $this->assign('_acl', $this->_acl);        $this->assign('_layoutParams', $_params);        $this->display('template.tpl');    }    public function setJs(array $js) {        if (is_array($js) && count($js)) {            for ($i = 0; $i < count($js); $i++) {                $this->_js[] = $this->_rutas['js'] . $js[$i] . '.js';            }        } else {            throw new Exception('Error de js');        }    }    public function setJsPlugin(array $js) {        if (is_array($js) && count($js)) {            for ($i = 0; $i < count($js); $i++) {                $this->_jsPlugin[] = BASE_URL . 'public/js/' . $js[$i] . '.js';            }        } else {            throw new Exception('Error de js plugin');        }    }    public function setCssPlugin(array $css) {        if (is_array($css) && count($css)) {            for ($i = 0; $i < count($css); $i++) {                $this->_cssPlugin[] = BASE_URL . 'public/css/' . $css[$i] . '.css';            }        } else {            throw new Exception('Error de css plugin');        }    }    public function setCss(array $css) {        if (is_array($css) && count($css)) {            for ($i = 0; $i < count($css); $i++) {                $this->_css[] = $this->_rutas['css'] . $css[$i] . '.css';            }        } else {            throw new Exception('Error de css');        }    }}?>